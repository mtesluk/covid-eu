(this["webpackJsonpcovid-eu"]=this["webpackJsonpcovid-eu"]||[]).push([[0],{178:function(t,e,a){t.exports=a(196)},183:function(t,e,a){},184:function(t,e,a){},185:function(t,e,a){},192:function(t,e,a){},193:function(t,e,a){},194:function(t,e,a){},195:function(t,e,a){},196:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(92),o=a.n(i),s=(a(183),a(38)),c=(a(184),a(23)),l=a(2),u=a(3),d=a(4),h=a(6),p=a(5),m=(a(185),a(206)),f=a(9),v={ranges:[{min:0,max:1e7,color:"#fff1d9"},{min:1000001,max:2e7,color:"#fdcd8b"},{min:2000001,max:3e7,color:"#b55440"},{min:3000001,max:4e7,color:"#b53828"},{min:4000001,max:7e8,color:"#500000"}],default:"#000"},g=a(14),_=a.n(g),b=a(1);function y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function C(t){var e=0;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"===typeof t)return O(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(t,e):void 0}}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function N(t,e){if(!(e instanceof Object))return e;for(var a,n=C(e.ranges);!(a=n()).done;){var r=a.value;if(t>r.min&&t<r.max)return r.color}return e.default}var w=function(t){function e(){return t.apply(this,arguments)||this}y(e,t);var a=e.prototype;return a.componentDidMount=function(){var t=this.props.width,e=.8*t,a=this.props.data;this._prepareChart(e,t,a,this.props.colors)},a.componentDidUpdate=function(t,e){if(this.props.data!==t.data){var a=this.props.width,n=.8*a,r=this.props.data;this._prepareChart(n,a,r,this.props.colors)}},a._prepareChart=function(t,e,a,n){var r=this,i=30,o=0,s=30,c=40,l=Object(b.j)().domain([0,Object(b.e)(a,(function(t){return t.value}))]).nice().range([t-s,i]),u=Object(b.i)().domain(Object(b.h)(a.length)).range([c,e-o]).padding(.1),d=Object(b.l)("."+this.props.classSvgName).attr("viewBox",[0,0,e,t]);d.append("g").selectAll("rect").data(a).join("rect").attr("fill",(function(t){return N(t.value,n)})).attr("x",(function(t,e){return u(e)})).attr("y",(function(t){return l(t.value)})).attr("height",(function(t){return l(0)-l(t.value)})).attr("width",u.bandwidth()).on("mouseover",(function(t){r.props.setPickedData(t.name)})),d.append("g").call((function(e){return e.attr("transform","translate(0,"+(t-s)+")").call(Object(b.b)(u).tickFormat((function(t){return a[t].name})).tickSizeOuter(0))})),d.append("g").call((function(t){return t.attr("transform","translate("+c+",0)").call(Object(b.c)(l).ticks(null,"s")).call((function(t){return t.select(".domain").remove()}))}))},a.render=function(){return _.a.createElement("svg",{className:this.props.classSvgName})},e}(_.a.Component),P=function(t){function e(){return t.apply(this,arguments)||this}y(e,t);var a=e.prototype;return a.componentDidMount=function(){var t=this.props.data,e=this.props.width,a=.8*e;this._prepareChart(a,e,t)},a.componentDidUpdate=function(t,e){if(this.props.data!==t.data){var a=this.props.data,n=this.props.width,r=.8*n;this._prepareChart(r,n,a)}},a._prepareChart=function(t,e,a){var n=this,r=Object(b.k)().domain(a.map((function(t){return t.name}))).range(Object(b.g)((function(t){return Object(b.d)(.8*t+.1)}),a.length).reverse()),i=Object(b.a)().innerRadius(0).outerRadius(Math.min(e,t)/2-1),o=Math.min(e,t)/2*.8,s=(Object(b.a)().innerRadius(o).outerRadius(o),Object(b.f)().sort(null).value((function(t){return t.value}))(a)),c=Object(b.l)("."+this.props.classSvgName).attr("viewBox",[-e/2,-t/2,e,t]);c.append("g").attr("stroke","white").selectAll("path").data(s).join("path").attr("fill",(function(t){return r(t.data.name)})).attr("d",i).on("mouseover",(function(t){n.props.setPickedData(t.data.name)})).append("title").text((function(t){return t.data.name+": "+t.data.value.toLocaleString()})),c.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(s).join("text").attr("transform",(function(t){return t.innerRadius=0,t.outerRadius=100,"translate("+i.centroid(t)+")"})).call((function(t){return t.append("tspan").attr("y","-0.4rem").attr("font-weight","bold").text((function(t){return t.data.name}))})).call((function(t){return t.filter((function(t){return t.endAngle-t.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7rem").attr("fill-opacity",.7).text((function(t){return t.data.value.toLocaleString()}))}))},a.render=function(){return _.a.createElement("svg",{className:this.props.classSvgName})},e}(_.a.Component);function j(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=a?t.filter((function(t){return a(t)})):t,i=r.map((function(t){return{name:t.country,value:t[e]}}));return n&&(i=i.slice(0,n)),i}function E(t){getComputedStyle||alert("Not supported");var e=getComputedStyle(t),a=(null===t||void 0===t?void 0:t.clientWidth)||0;return a-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}var k=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).ref=r.a.createRef(),t.state={loading:!0,width:0,endpoints:{countries:"./mock-data.json",map:"./eu.json"}},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=E(this.ref.current),a=.8*e,n=f.a().translate([e/4,1.6*a]).scale(e/1.1),r=f.b().projection(n),i=f.d(".map__svg").attr("width",e).attr("height",a),o=f.c(this.state.endpoints.map,{headers:{Accept:"application/json; odata=verbose"}}),s=f.c(this.state.endpoints.countries,{headers:{Accept:"application/json; odata=verbose"}});Promise.all([o,s]).then((function(e){var a=e[0],n=t._filterCountries(e[1].data,a.features.map((function(t){return t.properties})));t.props.setAllData(n);var o=t._reduceCountries(n);i.selectAll("path").data(a.features).enter().append("path").attr("d",r).attr("fill",(function(t){var e,a,n=null===(e=t.properties)||void 0===e?void 0:e.name;return N(null===(a=o[n])||void 0===a?void 0:a.cases,v)})).attr("stroke","red").on("mouseover",(function(e){var a,n,r,i,s,c,l,u,d=null===(a=e.properties)||void 0===a?void 0:a.name;t.props.setPickedData({country:d,cases:null===(n=o[d])||void 0===n?void 0:n.cases,deaths:null===(r=o[d])||void 0===r?void 0:r.deaths,recovered:null===(i=o[d])||void 0===i?void 0:i.recovered,critical:null===(s=o[d])||void 0===s?void 0:s.critical,casesPerOneMillion:null===(c=o[d])||void 0===c?void 0:c.casesPerOneMillion,deathsPerOneMillion:null===(l=o[d])||void 0===l?void 0:l.deathsPerOneMillion,testsPerOneMillion:null===(u=o[d])||void 0===u?void 0:u.testsPerOneMillion})})),t.setState(Object(l.a)({},t.state,{loading:!1}))}))}},{key:"_filterCountries",value:function(t,e){var a=null===e||void 0===e?void 0:e.map((function(t){return null===t||void 0===t?void 0:t.sovereignt}));return t=t.filter((function(t){return a.includes(t.country)}))}},{key:"_reduceCountries",value:function(t){return t.reduce((function(t,e){return Object(l.a)({},t,Object(c.a)({},e.country,e))}),{})}},{key:"render",value:function(){return r.a.createElement("div",{className:"map",ref:this.ref},this.state.loading&&r.a.createElement(m.a,{className:"map__progress",color:"secondary"}),r.a.createElement("svg",{className:"map__svg"}))}}]),a}(r.a.Component);a(192),a(193);function M(t){return{backgroundColor:t}}var D=function(t){return r.a.createElement("div",{className:"legend"},r.a.createElement("h3",null,"Legend"),r.a.createElement("div",{className:"legend__element",style:M("#fff1d9")},"Less"),r.a.createElement("div",{className:"legend__element",style:M("#fdcd8b")}),r.a.createElement("div",{className:"legend__element",style:M("#b55440")}),r.a.createElement("div",{className:"legend__element",style:M("#b53828")}),r.a.createElement("div",{className:"legend__element",style:Object(l.a)({},M("#500000"),{color:"white"})},"More"))},S=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={extraClass:""},t}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;this.props.data.country!==t.data.country&&setTimeout((function(){e.setState(Object(l.a)({},e.state,{extraClass:""}))}),1e3)}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.data.country!==t.data.country&&this.setState(Object(l.a)({},this.state,{extraClass:"info__anim"})),null}},{key:"render",value:function(){return r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:this.state.extraClass},r.a.createElement("p",{className:"info__element"},"Name: ",this.props.data.country||"none"),r.a.createElement("p",{className:"info__element"},"Cases: ",this.props.data.cases||"0"),r.a.createElement("p",{className:"info__element"},"Deaths: ",this.props.data.deaths||"0"),r.a.createElement("p",{className:"info__element"},"Recovered: ",this.props.data.recovered||"0"),r.a.createElement("p",{className:"info__element"},"Critical: ",this.props.data.critical||"0"),r.a.createElement("p",{className:"info__element"},"Cases Per Million: ",this.props.data.casesPerOneMillion||"0"),r.a.createElement("p",{className:"info__element"},"Deaths Per Million: ",this.props.data.deathsPerOneMillion||"0"),r.a.createElement("p",{className:"info__element"},"Tests Per Million: ",this.props.data.testsPerOneMillion||"0")),r.a.createElement("div",{className:"info__legend"},r.a.createElement(D,null)))}}]),a}(r.a.Component),x=(a(194),function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).ref=r.a.createRef(),t.additionalCountries=["Poland"],t.amountOfShowingCountries=6,t.state={loading:!0,mostNumCasesChart:{width:0,data:[]},mostNumDeathsChart:{width:0,data:[]}},t}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this;if(this.props.data!==t.data){var n=this.amountOfShowingCountries-this.additionalCountries.length,r=E(this.ref.current),i=j(this.props.data,"cases",(function(t){return t.cases>1e5}),n),o=j(this.props.data,"deaths",(function(t){return t.deaths>2e4}),n),s=j(this.props.data,"cases",(function(t){return a.additionalCountries.includes(t.country)})),c=j(this.props.data,"deaths",(function(t){return a.additionalCountries.includes(t.country)}));i=i.concat(s),o=o.concat(c),this.setState(Object(l.a)({},this.state,{loading:!1,mostNumCasesChart:{width:r,data:i},mostNumDeathsChart:{width:r,data:o}}))}}},{key:"setPickedData",value:function(t){var e=this.props.data.find((function(e){return e.country===t}));this.props.setPickedData(e)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"charts-main",ref:this.ref},this.state.loading&&r.a.createElement(m.a,{className:"charts-main__progress",color:"secondary"}),r.a.createElement("header",{className:"charts-main__header"},"Most numerous cases"),r.a.createElement(w,{classSvgName:"charts-main__svg-bar",setPickedData:function(e){return t.setPickedData(e)},width:this.state.mostNumCasesChart.width,data:this.state.mostNumCasesChart.data,colors:"#500000"}),r.a.createElement("header",{className:"charts-main__header"},"Most numerous deaths"),r.a.createElement(P,{classSvgName:"charts-main__svg-pie",setPickedData:function(e){return t.setPickedData(e)},width:this.state.mostNumDeathsChart.width,data:this.state.mostNumDeathsChart.data}),r.a.createElement("p",{className:"charts-main__footer"},"Source: https://coronavirus-19-api.herokuapp.com/countries"))}}]),a}(r.a.Component)),A=(a(195),function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).ref=r.a.createRef(),t.additionalCountries=["Poland"],t.amountOfShowingCountries=5,t.state={loading:!0,mostNumCasesPerMillionChart:{width:0,data:[]},mostNumDeathsPerMillionChart:{width:0,data:[]},mostNumTestsPerMillionChart:{width:0,data:[]}},t}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this;if(this.props.data!==t.data){var n=this.amountOfShowingCountries-this.additionalCountries.length,r=E(this.ref.current),i=j(this.props.data,"deathsPerOneMillion",(function(t){return t.deathsPerOneMillion>300}),n),o=j(this.props.data,"testsPerOneMillion",(function(t){return t.cases>1e5}),n),s=j(this.props.data,"casesPerOneMillion",(function(t){return t.casesPerOneMillion>4e3}),n),c=j(this.props.data,"deathsPerOneMillion",(function(t){return a.additionalCountries.includes(t.country)})),u=j(this.props.data,"testsPerOneMillion",(function(t){return a.additionalCountries.includes(t.country)})),d=j(this.props.data,"casesPerOneMillion",(function(t){return a.additionalCountries.includes(t.country)}));i=i.concat(c),o=o.concat(u),s=s.concat(d),this.setState(Object(l.a)({},this.state,{loading:!1,mostNumCasesPerMillionChart:{width:r,data:s},mostNumDeathsPerMillionChart:{width:r,data:i},mostNumTestsPerMillionChart:{width:r,data:o}}))}}},{key:"setPickedData",value:function(t){var e=this.props.data.find((function(e){return e.country===t}));this.props.setPickedData(e)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"charts-extra",ref:this.ref},this.state.loading&&r.a.createElement(m.a,{className:"charts-extra__progress",color:"secondary"}),r.a.createElement("header",{className:"charts-extra__header"},"Most tests per million"),r.a.createElement(w,{classSvgName:"charts-extra__svg-bar-tests",setPickedData:function(e){return t.setPickedData(e)},width:this.state.mostNumTestsPerMillionChart.width,data:this.state.mostNumTestsPerMillionChart.data,colors:"#500000"}),r.a.createElement("header",{className:"charts-extra__header"},"Most cases per million"),r.a.createElement(w,{classSvgName:"charts-extra__svg-bar-cases",setPickedData:function(e){return t.setPickedData(e)},width:this.state.mostNumCasesPerMillionChart.width,data:this.state.mostNumCasesPerMillionChart.data,colors:"#500000"}),r.a.createElement("header",{className:"charts-extra__header"},"Most deaths per million"),r.a.createElement(w,{classSvgName:"charts-extra__svg-bar-deaths",setPickedData:function(e){return t.setPickedData(e)},width:this.state.mostNumDeathsPerMillionChart.width,data:this.state.mostNumDeathsPerMillionChart.data,colors:"#500000"}))}}]),a}(r.a.Component)),R=function(){var t=Object(n.useState)({country:"Poland",cases:0,deaths:0,recovered:0,critical:0,casesPerOneMillion:0,deathsPerOneMillion:0,testsPerOneMillion:0}),e=Object(s.a)(t,2),a=e[0],i=e[1],o=Object(n.useState)([]),c=Object(s.a)(o,2),l=c[0],u=c[1];return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__info"},r.a.createElement(S,{data:a})),r.a.createElement("div",{className:"app__charts-main"},r.a.createElement(x,{setPickedData:function(t){return i(t)},data:l})),r.a.createElement("div",{className:"app__content"},r.a.createElement(k,{setPickedData:function(t){return i(t)},setAllData:function(t){return u(t)}})),r.a.createElement("div",{className:"app__charts-extra"},r.a.createElement(A,{setPickedData:function(t){return i(t)},data:l})))},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var a=t.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/covid-eu",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/covid-eu","/service-worker.js");U?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):T(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):T(e,t)}))}}()}},[[178,1,2]]]);
//# sourceMappingURL=main.26e487ec.chunk.js.map