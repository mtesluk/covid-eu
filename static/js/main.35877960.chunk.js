(this["webpackJsonpcovid-eu"]=this["webpackJsonpcovid-eu"]||[]).push([[0],{188:function(t,e,a){t.exports=a(223)},193:function(t,e,a){},194:function(t,e,a){},195:function(t,e,a){},219:function(t,e,a){},220:function(t,e,a){},221:function(t,e,a){},222:function(t,e,a){},223:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),s=a(101),i=a.n(s),o=(a(193),a(39)),c=(a(194),a(24)),l=a(3),u=a(4),d=a(5),p=a(7),m=a(6),h=(a(195),a(233)),f=a(102),v=a.n(f),g=a(15),_=[{min:0,max:1e3,color:"#fff1d9"},{min:1001,max:1e4,color:"#fdcd8b"},{min:10001,max:5e4,color:"#b55440"},{min:50001,max:1e5,color:"#b53828"},{min:100001,max:420001,color:"#500000"}],y=a(14),b=a.n(y),N=a(1);function O(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function C(t){var e=0;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"===typeof t)return j(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?j(t,e):void 0}}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}var E=function(t,e){if(!t)return"#ff0909";for(var a,r=C(e);!(a=r()).done;){var n=a.value;if(t>n.min&&t<n.max)return n.color}return"#000"},w=function(t){function e(){return t.apply(this,arguments)||this}O(e,t);var a=e.prototype;return a.componentDidMount=function(){var t=this.props.width,e=.8*t,a=this.props.data;this._prepareBarChart(e,t,a,this.props.ranges)},a.componentDidUpdate=function(t,e){if(this.props.data!==t.data){var a=this.props.width,r=.8*a,n=this.props.data;this._prepareBarChart(r,a,n,this.props.ranges)}},a._prepareBarChart=function(t,e,a,r){var n=this,s=30,i=0,o=30,c=40,l=Object(N.j)().domain([0,Object(N.e)(a,(function(t){return t.cases}))]).nice().range([t-o,s]),u=Object(N.i)().domain(Object(N.h)(a.length)).range([c,e-i]).padding(.1),d=Object(N.l)("."+this.props.classSvgName).attr("viewBox",[0,0,e,t]);d.append("g").selectAll("rect").data(a).join("rect").attr("fill",(function(t){return E(t.cases,r)})).attr("x",(function(t,e){return u(e)})).attr("y",(function(t){return l(t.cases)})).attr("height",(function(t){return l(0)-l(t.cases)})).attr("width",u.bandwidth()).on("mouseover",(function(t){var e=t.country;n.props.setPickedData({countryName:e,cases:t.cases,deaths:t.deaths,recovered:t.recovered,critical:t.critical,casesPerOneMillion:t.casesPerOneMillion,deathsPerOneMillion:t.deathsPerOneMillion,testsPerOneMillion:t.testsPerOneMillion})})),d.append("g").call((function(e){return e.attr("transform","translate(0,"+(t-o)+")").call(Object(N.b)(u).tickFormat((function(t){return a[t].country})).tickSizeOuter(0))})),d.append("g").call((function(t){return t.attr("transform","translate("+c+",0)").call(Object(N.c)(l).ticks(null,"s")).call((function(t){return t.select(".domain").remove()}))}))},a.render=function(){return b.a.createElement("svg",{className:this.props.classSvgName})},e}(b.a.Component),k=function(t){function e(){return t.apply(this,arguments)||this}O(e,t);var a=e.prototype;return a.componentDidMount=function(){var t=this.props.width,e=.8*t,a=this.props.data;this._prepareBarChart(e,t,a)},a.componentDidUpdate=function(t,e){if(console.log(this.props.data),this.props.data!==t.data){var a=this.props.data,r=this.props.width,n=Math.min(r,500);this._prepareChart(n,r,a)}},a._prepareChart=function(t,e,a){var r=Object(N.k)().domain(a.map((function(t){return t.country}))).range(Object(N.g)((function(t){return Object(N.d)(.8*t+.1)}),a.length).reverse()),n=Object(N.a)().innerRadius(0).outerRadius(Math.min(e,t)/2-1),s=Math.min(e,t)/2*.8,i={centroid:Object(N.a)().innerRadius(s).outerRadius(s)},o=Object(N.f)().sort(null).value((function(t){return t.cases}))(a),c=Object(N.l)("."+this.props.classSvgName).attr("viewBox",[-e/2,-t/2,e,t]);c.append("g").attr("stroke","white").selectAll("path").data(o).join("path").attr("fill",(function(t){return r(t.data.country)})).attr("d",n).append("title").text((function(t){return t.data.country+": "+t.data.cases.toLocaleString()})),c.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(o).join("text").attr("transform",(function(t){return"translate("+i.centroid(t)+")"})).call((function(t){return t.append("tspan").attr("y","-0.4em").attr("font-weight","bold").text((function(t){return t.data.country}))})).call((function(t){return t.filter((function(t){return t.endAngle-t.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7em").attr("fill-opacity",.7).text((function(t){return t.data.cases.toLocaleString()}))}))},a.render=function(){return b.a.createElement("svg",{className:this.props.classSvgName})},e}(b.a.Component),P=function(t){Object(p.a)(a,t);var e=Object(m.a)(a);function a(t){var r;return Object(u.a)(this,a),(r=e.call(this,t)).ref=n.a.createRef(),r.state={loading:!0,coronaData:{},width:0,endpoints:{countries:"https://coronavirus-19-api.herokuapp.com/countries",map:"./eu.json"}},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this;getComputedStyle||alert("Not supported");var e=getComputedStyle(this.ref.current),a=this.ref.current.clientWidth,r=.8*(a-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)),n=g.a().translate([a/4,1.6*r]).scale([a/1.1]),s=g.b().projection(n),i=g.d(".map__svg").attr("width",a).attr("height",r),o=g.c(this.state.endpoints.map,{headers:{Accept:"application/json; odata=verbose"}}),c=v.a.get(this.state.endpoints.countries);Promise.all([o,c]).then((function(e){var a=e[0],r=t._filterCountries(e[1].data,a.features.map((function(t){return t.properties})));t.props.setAllData(r),r=t._reduceCountries(r),i.selectAll("path").data(a.features).enter().append("path").attr("d",s).attr("fill",(function(t){var e,a=t.properties.name;return E(null===(e=r[a])||void 0===e?void 0:e.cases,_)})).attr("stroke",(function(t){return"red"})).on("mouseover",(function(e){var a,n,s,i,o,c,l,u=e.properties.name;t.props.setPickedData({countryName:u,cases:null===(a=r[u])||void 0===a?void 0:a.cases,deaths:null===(n=r[u])||void 0===n?void 0:n.deaths,recovered:null===(s=r[u])||void 0===s?void 0:s.recovered,critical:null===(i=r[u])||void 0===i?void 0:i.critical,casesPerOneMillion:null===(o=r[u])||void 0===o?void 0:o.casesPerOneMillion,deathsPerOneMillion:null===(c=r[u])||void 0===c?void 0:c.deathsPerOneMillion,testsPerOneMillion:null===(l=r[u])||void 0===l?void 0:l.testsPerOneMillion})})),t.setState(Object(l.a)({},t.state,{loading:!1})),t.setState(Object(l.a)({},t.state,{coronaData:r}))}))}},{key:"_filterCountries",value:function(t,e){var a=e.map((function(t){return t.sovereignt}));return t=t.filter((function(t){return a.includes(t.country)}))}},{key:"_reduceCountries",value:function(t){return t.reduce((function(t,e){return Object(l.a)({},t,Object(c.a)({},e.country,e))}),{})}},{key:"render",value:function(){return n.a.createElement("div",{className:"map",ref:this.ref},this.state.loading&&n.a.createElement(h.a,{className:"map__progress",color:"secondary"}),n.a.createElement("svg",{className:"map__svg"}))}}]),a}(n.a.Component),S=(a(219),function(t){Object(p.a)(a,t);var e=Object(m.a)(a);function a(t){var r;return Object(u.a)(this,a),(r=e.call(this,t)).ref=n.a.createRef(),r.state={cl:""},r}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;this.props.countryName!==t.countryName&&setTimeout((function(){e.setState(Object(l.a)({},e.state,{cl:""}))}),1e3)}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.countryName!==t.countryName&&this.setState(Object(l.a)({},this.state,{cl:"info__anim"})),null}},{key:"render",value:function(){return n.a.createElement("div",{className:"info "+this.state.cl},n.a.createElement("p",{className:"info__element"},"Name: ",this.props.countryName||"none"),n.a.createElement("p",{className:"info__element"},"Cases: ",this.props.cases||"0"),n.a.createElement("p",{className:"info__element"},"Deaths: ",this.props.deaths||"0"),n.a.createElement("p",{className:"info__element"},"Recovered: ",this.props.recovered||"0"),n.a.createElement("p",{className:"info__element"},"Critical: ",this.props.critical||"0"),n.a.createElement("p",{className:"info__element"},"Cases Per Million: ",this.props.casesPerOneMillion||"0"),n.a.createElement("p",{className:"info__element"},"Deaths Per Million: ",this.props.deathsPerOneMillion||"0"),n.a.createElement("p",{className:"info__element"},"Tests Per Million: ",this.props.testsPerOneMillion||"0"))}}]),a}(n.a.Component)),D=(a(220),function(t){Object(p.a)(a,t);var e=Object(m.a)(a);function a(t){var r;return Object(u.a)(this,a),(r=e.call(this,t)).ref=n.a.createRef(),r.state={loading:!0,mostNumCasesChart:{width:0,data:[]},lessNumCasesChart:{width:0,data:[]}},r}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t,e){if(this.props.data!==t.data){var a=this._getWidth(),r=this.props.data.filter((function(t){return t.cases>1e5||"Poland"===t.country})),n=this.props.data.filter((function(t){return t.cases<3e3||"Poland"===t.country}));this.setState(Object(l.a)({},this.state,{loading:!1,mostNumCasesChart:{width:a,data:r},lessNumCasesChart:{width:a,data:n}}))}}},{key:"_getWidth",value:function(){getComputedStyle||alert("Not supported");var t=getComputedStyle(this.ref.current),e=this.ref.current.clientWidth;return e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}},{key:"render",value:function(){return n.a.createElement("div",{className:"charts-main",ref:this.ref},this.state.loading&&n.a.createElement(h.a,{className:"charts-main__progress",color:"secondary"}),n.a.createElement("header",{className:"charts-main__header"},"Most numerous countries"),n.a.createElement(w,{classSvgName:"charts-main__svg-bar",setPickedData:this.props.setPickedData,width:this.state.mostNumCasesChart.width,data:this.state.mostNumCasesChart.data,ranges:_}),n.a.createElement("header",{className:"charts-main__header"},"Less numerous countries"),n.a.createElement(k,{classSvgName:"charts-main__svg-pie",setPickedData:this.props.setPickedData,width:this.state.lessNumCasesChart.width,data:this.state.lessNumCasesChart.data}),n.a.createElement("p",{className:"charts-main__footer"},"Source: https://coronavirus-19-api.herokuapp.com/countries"))}}]),a}(n.a.Component)),M=(a(221),function(t){Object(p.a)(a,t);var e=Object(m.a)(a);function a(t){var r;return Object(u.a)(this,a),(r=e.call(this,t)).ref=n.a.createRef(),r.state={loading:!0,mostNumDeathsChart:{width:0,data:[]},lessNumCasesChart:{width:0,data:[]}},r}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t,e){if(this.props.data!==t.data){var a=this._getWidth(),r=this.props.data.filter((function(t){return t.deaths>2e4||"Poland"===t.country})),n=this.props.data.filter((function(t){return t.testsPerMillion>9e3||"Poland"===t.country}));this.setState(Object(l.a)({},this.state,{loading:!1,mostNumDeathsChart:{width:a,data:r},lessNumCasesChart:{width:a,data:n}}))}}},{key:"_getWidth",value:function(){getComputedStyle||alert("Not supported");var t=getComputedStyle(this.ref.current),e=this.ref.current.clientWidth;return e-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}},{key:"render",value:function(){return n.a.createElement("div",{className:"charts-extra",ref:this.ref},this.state.loading&&n.a.createElement(h.a,{className:"charts-extra__progress",color:"secondary"}),n.a.createElement("header",{className:"charts-extra__header"},"Most deaths"),n.a.createElement(w,{classSvgName:"charts-extra__svg-bar",setPickedData:this.props.setPickedData,width:this.state.mostNumDeathsChart.width,data:this.state.mostNumDeathsChart.data,ranges:_}))}}]),a}(n.a.Component)),x=(a(222),function(t){return{backgroundColor:t}}),A=function(t){return n.a.createElement("div",{className:"legend"},n.a.createElement("h3",null,"Legend"),n.a.createElement("div",{className:"legend__element",style:x("#fff1d9")},"0-1000"),n.a.createElement("div",{className:"legend__element",style:x("#fdcd8b")},"1001-10000"),n.a.createElement("div",{className:"legend__element",style:x("#b55440")},"10001-50000"),n.a.createElement("div",{className:"legend__element",style:x("#b53828")},"50001-100000"),n.a.createElement("div",{className:"legend__element",style:Object(l.a)({},x("#500000"),{color:"white"})},"100001-320001"))},R=function(){var t=Object(r.useState)({}),e=Object(o.a)(t,2),a=e[0],s=e[1],i=Object(r.useState)([]),c=Object(o.a)(i,2),l=c[0],u=c[1];return n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"app__info"},n.a.createElement(S,a)),n.a.createElement("div",{className:"app__charts-main"},n.a.createElement(D,{setPickedData:s,data:l})),n.a.createElement("div",{className:"app__content"},n.a.createElement(P,{setPickedData:s,setAllData:u})),n.a.createElement("div",{className:"app__legend"},n.a.createElement(A,null)),n.a.createElement("div",{className:"app__charts-extra"},n.a.createElement(M,{setPickedData:s,data:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[188,1,2]]]);
//# sourceMappingURL=main.35877960.chunk.js.map