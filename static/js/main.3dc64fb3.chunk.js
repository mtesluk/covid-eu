(this["webpackJsonpcovid-eu"]=this["webpackJsonpcovid-eu"]||[]).push([[0],{168:function(e,t,a){e.exports=a(201)},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(89),i=a.n(s),o=(a(173),a(29)),c=(a(174),a(17)),l=a(3),u=a(4),d=a(5),m=a(7),p=a(6),h=(a(175),a(211)),f=a(90),v=a.n(f),g=a(1),_=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.state={loading:!0,coronaData:{},width:0,endpoints:{countries:"https://coronavirus-19-api.herokuapp.com/countries",map:"./eu.json"}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;getComputedStyle||alert("Not supported");var t=getComputedStyle(this.ref.current),a=this.ref.current.clientWidth,n=.8*(a-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)),r=g.d().translate([a/4,1.6*n]).scale([a/1.1]),s=g.e().projection(r),i=g.o(".map__svg").attr("width",a).attr("height",n),o=g.g(this.state.endpoints.map,{headers:{Accept:"application/json; odata=verbose"}}),c=v.a.get(this.state.endpoints.countries);Promise.all([o,c]).then((function(t){var a=t[0],n=e._filterCountries(t[1].data,a.features.map((function(e){return e.properties})));e.props.setAllData(n),n=e._reduceCountries(n),i.selectAll("path").data(a.features).enter().append("path").attr("d",s).attr("fill",(function(t){var a,r=t.properties.name;return e._manageColors(null===(a=n[r])||void 0===a?void 0:a.cases)})).attr("stroke",(function(e){return"red"})).on("mouseover",(function(t){var a,r,s,i,o,c,l,u=t.properties.name;e.props.setPickedData({countryName:u,cases:null===(a=n[u])||void 0===a?void 0:a.cases,deaths:null===(r=n[u])||void 0===r?void 0:r.deaths,recovered:null===(s=n[u])||void 0===s?void 0:s.recovered,critical:null===(i=n[u])||void 0===i?void 0:i.critical,casesPerOneMillion:null===(o=n[u])||void 0===o?void 0:o.casesPerOneMillion,deathsPerOneMillion:null===(c=n[u])||void 0===c?void 0:c.deathsPerOneMillion,testsPerOneMillion:null===(l=n[u])||void 0===l?void 0:l.testsPerOneMillion})})),e.setState(Object(l.a)({},e.state,{loading:!1})),e.setState(Object(l.a)({},e.state,{coronaData:n}))}))}},{key:"_manageColors",value:function(e){if(!e)return"#ff0909";for(var t=0,a=[{min:0,max:1e3,color:"#fff1d9"},{min:1001,max:1e4,color:"#fdcd8b"},{min:10001,max:5e4,color:"#b55440"},{min:50001,max:1e5,color:"#b53828"},{min:100001,max:420001,color:"#500000"}];t<a.length;t++){var n=a[t];if(e>n.min&&e<n.max)return n.color}return"#000"}},{key:"_filterCountries",value:function(e,t){var a=t.map((function(e){return e.sovereignt}));return e=e.filter((function(e){return a.includes(e.country)}))}},{key:"_reduceCountries",value:function(e){return e.reduce((function(e,t){return Object(l.a)({},e,Object(c.a)({},t.country,t))}),{})}},{key:"render",value:function(){return r.a.createElement("div",{className:"map",ref:this.ref},this.state.loading&&r.a.createElement(h.a,{className:"map__progress",color:"secondary"}),r.a.createElement("svg",{className:"map__svg"}))}}]),a}(r.a.Component),N=(a(197),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.state={cl:""},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.countryName!==e.countryName&&setTimeout((function(){t.setState(Object(l.a)({},t.state,{cl:""}))}),1e3)}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.countryName!==e.countryName&&this.setState(Object(l.a)({},this.state,{cl:"info__anim"})),null}},{key:"render",value:function(){return r.a.createElement("div",{className:"info "+this.state.cl},r.a.createElement("p",{className:"info__element"},"Name: ",this.props.countryName||"none"),r.a.createElement("p",{className:"info__element"},"Cases: ",this.props.cases||"0"),r.a.createElement("p",{className:"info__element"},"Deaths: ",this.props.deaths||"0"),r.a.createElement("p",{className:"info__element"},"Recovered: ",this.props.recovered||"0"),r.a.createElement("p",{className:"info__element"},"Critical: ",this.props.critical||"0"),r.a.createElement("p",{className:"info__element"},"Cases Per Million: ",this.props.casesPerOneMillion||"0"),r.a.createElement("p",{className:"info__element"},"Deaths Per Million: ",this.props.deathsPerOneMillion||"0"),r.a.createElement("p",{className:"info__element"},"Tests Per Million: ",this.props.testsPerOneMillion||"0"))}}]),a}(r.a.Component)),y=(a(88),a(198),a(95)),b=[{min:0,max:1e3,color:"#fff1d9"},{min:1001,max:1e4,color:"#fdcd8b"},{min:10001,max:5e4,color:"#b55440"},{min:50001,max:1e5,color:"#b53828"},{min:100001,max:420001,color:"#500000"}],C=function(e){if(!e)return"#ff0909";var t,a=Object(y.a)(b);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e>n.min&&e<n.max)return n.color}}catch(r){a.e(r)}finally{a.f()}return"#000"},O=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(this.props.data!==e.data){var a=this.props.width,n=.8*a,r=this.props.data;this._prepareBarChart(n,a,r)}}},{key:"_prepareBarChart",value:function(e,t,a){var n=this,r=30,s=0,i=30,o=40,c=g.m().domain([0,g.h(a,(function(e){return e.cases}))]).nice().range([e-i,r]),l=g.l().domain(g.k(a.length)).range([o,t-s]).padding(.1),u=g.o(".".concat(this.props.classSvgName)).attr("viewBox",[0,0,t,e]);u.append("g").selectAll("rect").data(a).join("rect").attr("fill",(function(e){return C(e.cases)})).attr("x",(function(e,t){return l(t)})).attr("y",(function(e){return c(e.cases)})).attr("height",(function(e){return c(0)-c(e.cases)})).attr("width",l.bandwidth()).on("mouseover",(function(e){var t=e.country;n.props.setPickedData({countryName:t,cases:e.cases,deaths:e.deaths,recovered:e.recovered,critical:e.critical,casesPerOneMillion:e.casesPerOneMillion,deathsPerOneMillion:e.deathsPerOneMillion,testsPerOneMillion:e.testsPerOneMillion})})),u.append("g").call((function(t){return t.attr("transform","translate(0,".concat(e-i,")")).call(g.b(l).tickFormat((function(e){return a[e].country})).tickSizeOuter(0))})),u.append("g").call((function(e){return e.attr("transform","translate(".concat(o,",0)")).call(g.c(c).ticks(null,"s")).call((function(e){return e.select(".domain").remove()}))}))}},{key:"render",value:function(){return r.a.createElement("svg",{className:this.props.classSvgName})}}]),a}(r.a.Component),E=(a(199),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(console.log(this.props.data),this.props.data!==e.data){var a=this.props.data,n=this.props.width,r=Math.min(n,500);this._prepareChart(r,n,a)}}},{key:"_prepareChart",value:function(e,t,a){var n=g.n().domain(a.map((function(e){return e.country}))).range(g.j((function(e){return g.f(.8*e+.1)}),a.length).reverse()),r=g.a().innerRadius(0).outerRadius(Math.min(t,e)/2-1),s=Math.min(t,e)/2*.8,i={centroid:g.a().innerRadius(s).outerRadius(s)},o=g.i().sort(null).value((function(e){return e.cases}))(a),c=g.o(".".concat(this.props.classSvgName)).attr("viewBox",[-t/2,-e/2,t,e]);c.append("g").attr("stroke","white").selectAll("path").data(o).join("path").attr("fill",(function(e){return n(e.data.country)})).attr("d",r).append("title").text((function(e){return"".concat(e.data.country,": ").concat(e.data.cases.toLocaleString())})),c.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(o).join("text").attr("transform",(function(e){return"translate(".concat(i.centroid(e),")")})).call((function(e){return e.append("tspan").attr("y","-0.4em").attr("font-weight","bold").text((function(e){return e.data.country}))})).call((function(e){return e.filter((function(e){return e.endAngle-e.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7em").attr("fill-opacity",.7).text((function(e){return e.data.cases.toLocaleString()}))}))}},{key:"render",value:function(){return r.a.createElement("svg",{className:this.props.classSvgName})}}]),a}(r.a.Component)),k=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.state={loading:!0,mostNumCasesChart:{width:0,data:[]},lessNumCasesChart:{width:0,data:[]}},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(this.props.data!==e.data){var a=this._getWidth(),n=this.props.data.filter((function(e){return e.cases>1e5||"Poland"===e.country})),r=this.props.data.filter((function(e){return e.cases<3e3||"Poland"===e.country}));this.setState(Object(l.a)({},this.state,{loading:!1,mostNumCasesChart:{width:a,data:n},lessNumCasesChart:{width:a,data:r}}))}}},{key:"_getWidth",value:function(){getComputedStyle||alert("Not supported");var e=getComputedStyle(this.ref.current),t=this.ref.current.clientWidth;return t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}},{key:"render",value:function(){return r.a.createElement("div",{className:"charts-main",ref:this.ref},this.state.loading&&r.a.createElement(h.a,{className:"charts-main__progress",color:"secondary"}),r.a.createElement("header",{className:"charts-main__header"},"Most numerous countries"),r.a.createElement(O,{classSvgName:"charts-main__svg-bar",setPickedData:this.props.setPickedData,width:this.state.mostNumCasesChart.width,data:this.state.mostNumCasesChart.data}),r.a.createElement("header",{className:"charts-main__header"},"Less numerous countries"),r.a.createElement(E,{classSvgName:"charts-main__svg-pie",setPickedData:this.props.setPickedData,width:this.state.lessNumCasesChart.width,data:this.state.lessNumCasesChart.data}),r.a.createElement("p",{className:"charts-main__footer"},"Source: https://coronavirus-19-api.herokuapp.com/countries"))}}]),a}(r.a.Component),j=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.state={loading:!0,mostNumDeathsChart:{width:0,data:[]},lessNumCasesChart:{width:0,data:[]}},n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(this.props.data!==e.data){var a=this._getWidth(),n=this.props.data.filter((function(e){return e.deaths>2e4||"Poland"===e.country})),r=this.props.data.filter((function(e){return e.testsPerMillion>9e3||"Poland"===e.country}));this.setState(Object(l.a)({},this.state,{loading:!1,mostNumDeathsChart:{width:a,data:n},lessNumCasesChart:{width:a,data:r}}))}}},{key:"_getWidth",value:function(){getComputedStyle||alert("Not supported");var e=getComputedStyle(this.ref.current),t=this.ref.current.clientWidth;return t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}},{key:"render",value:function(){return r.a.createElement("div",{className:"charts-extra",ref:this.ref},this.state.loading&&r.a.createElement(h.a,{className:"charts-extra__progress",color:"secondary"}),r.a.createElement("header",{className:"charts-extra__header"},"Most deaths"),r.a.createElement(O,{classSvgName:"charts-extra__svg-bar",setPickedData:this.props.setPickedData,width:this.state.mostNumDeathsChart.width,data:this.state.mostNumDeathsChart.data}),r.a.createElement("header",{className:"charts-extra__header"},"Tests"),r.a.createElement(E,{classSvgName:"charts-extra__svg-pie",setPickedData:this.props.setPickedData,width:this.state.lessNumCasesChart.width,data:this.state.lessNumCasesChart.data}))}}]),a}(r.a.Component),P=(a(200),function(e){return{backgroundColor:e}}),w=function(e){return r.a.createElement("div",{className:"legend"},r.a.createElement("h3",null,"Legend"),r.a.createElement("div",{className:"legend__element",style:P("#fff1d9")},"0-1000"),r.a.createElement("div",{className:"legend__element",style:P("#fdcd8b")},"1001-10000"),r.a.createElement("div",{className:"legend__element",style:P("#b55440")},"10001-50000"),r.a.createElement("div",{className:"legend__element",style:P("#b53828")},"50001-100000"),r.a.createElement("div",{className:"legend__element",style:Object(l.a)({},P("#500000"),{color:"white"})},"100001-320001"))},x=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)([]),c=Object(o.a)(i,2),l=c[0],u=c[1];return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__info"},r.a.createElement(N,a)),r.a.createElement("div",{className:"app__charts-main"},r.a.createElement(k,{setPickedData:s,data:l})),r.a.createElement("div",{className:"app__content"},r.a.createElement(_,{setPickedData:s,setAllData:u})),r.a.createElement("div",{className:"app__legend"},r.a.createElement(w,null)),r.a.createElement("div",{className:"app__charts-extra"},r.a.createElement(j,{setPickedData:s,data:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){}},[[168,1,2]]]);
//# sourceMappingURL=main.3dc64fb3.chunk.js.map