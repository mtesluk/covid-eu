(this["webpackJsonpcovid-eu"]=this["webpackJsonpcovid-eu"]||[]).push([[0],{165:function(t,e,a){t.exports=a(197)},170:function(t,e,a){},171:function(t,e,a){},172:function(t,e,a){},194:function(t,e,a){},195:function(t,e,a){},196:function(t,e,a){},197:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(87),c=a.n(o),i=(a(170),a(29)),s=(a(171),a(17)),l=a(3),u=a(5),m=a(6),d=a(8),f=a(7),p=(a(172),a(207)),h=a(27),v=a.n(h),g=a(1),y=function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).ref=r.a.createRef(),n.state={loading:!0,coronaData:{},width:0,endpoints:{countries:"https://coronavirus-19-api.herokuapp.com/countries",map:"./eu.json"}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var t=this;getComputedStyle||alert("Not supported");var e=getComputedStyle(this.ref.current),a=this.ref.current.clientWidth,n=.8*(a-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)),r=g.d().translate([a/4,1.6*n]).scale([a/1.1]),o=g.e().projection(r),c=g.o(".map__svg").attr("width",a).attr("height",n),i=g.g(this.state.endpoints.map,{headers:{Accept:"application/json; odata=verbose"}}),s=v.a.get(this.state.endpoints.countries);Promise.all([i,s]).then((function(e){var a=e[0],n=t._filterCountries(e[1].data,a.features.map((function(t){return t.properties})));t.props.setAllData(n),n=t._reduceCountries(n),c.selectAll("path").data(a.features).enter().append("path").attr("d",o).attr("fill",(function(e){var a,r=e.properties.name;return t._manageColors(null===(a=n[r])||void 0===a?void 0:a.cases)})).attr("stroke",(function(t){return"red"})).on("mouseover",(function(e){var a,r=e.properties.name;t.props.setPickedData({countryName:r,cases:null===(a=n[r])||void 0===a?void 0:a.cases})})),t.setState(Object(l.a)({},t.state,{loading:!1})),t.setState(Object(l.a)({},t.state,{coronaData:n}))}))}},{key:"_manageColors",value:function(t){if(!t)return"#ff0909";for(var e=0,a=[{min:0,max:1e3,color:"#fff1d9"},{min:1001,max:1e4,color:"#fdcd8b"},{min:10001,max:5e4,color:"#b55440"},{min:50001,max:1e5,color:"#b53828"},{min:100001,max:420001,color:"#500000"}];e<a.length;e++){var n=a[e];if(t>n.min&&t<n.max)return n.color}return"#000"}},{key:"_filterCountries",value:function(t,e){var a=e.map((function(t){return t.sovereignt}));return t=t.filter((function(t){return a.includes(t.country)}))}},{key:"_reduceCountries",value:function(t){return t.reduce((function(t,e){return Object(l.a)({},t,Object(s.a)({},e.country,e))}),{})}},{key:"render",value:function(){return r.a.createElement("div",{className:"map",ref:this.ref},this.state.loading&&r.a.createElement(p.a,{className:"map__progress",color:"secondary"}),r.a.createElement("svg",{className:"map__svg"}))}}]),a}(r.a.Component),_=(a(194),function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).ref=r.a.createRef(),n.state={cl:""},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;this.props.countryName!==t.countryName&&setTimeout((function(){e.setState(Object(l.a)({},e.state,{cl:""}))}),1e3)}},{key:"getSnapshotBeforeUpdate",value:function(t,e){return this.props.countryName!==t.countryName&&this.setState(Object(l.a)({},this.state,{cl:"info__anim"})),null}},{key:"render",value:function(){return r.a.createElement("div",{className:"info "+this.state.cl},r.a.createElement("p",{className:"info__name"},"Name: ",this.props.countryName||"none"),r.a.createElement("p",null,"Cases: ",this.props.cases||"0"),r.a.createElement("p",{className:"info__footer"},"Source: https://coronavirus-19-api.herokuapp.com/countries"))}}]),a}(r.a.Component)),b=(a(195),function(t){Object(d.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).ref=r.a.createRef(),n.state={loading:!0,width:0},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this;if(this.props.data!==t.data){var n=this.props.data.filter((function(t){return t.cases>1e5||"Poland"===t.country})),r=this.props.data.filter((function(t){return t.cases<3e3||"Poland"===t.country}));console.log(n),getComputedStyle||alert("Not supported");var o=getComputedStyle(this.ref.current),c=this.ref.current.clientWidth;c-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight);var i=Math.floor(.8*c),s=g.n().domain(r.map((function(t){return t.country}))).range(g.j((function(t){return g.f(.8*t+.1)}),n.length).reverse()),u=Math.min(c,500),m=g.a().innerRadius(0).outerRadius(Math.min(c,u)/2-1),d=Math.min(c,u)/2*.8,f={centroid:g.a().innerRadius(d).outerRadius(d)},p=g.i().sort(null).value((function(t){return t.cases}))(n),h=g.o(".charts__svg1").attr("viewBox",[-c/2,-u/2,c,u]);h.append("g").attr("stroke","white").selectAll("path").data(p).join("path").attr("fill",(function(t){return s(t.data.country)})).attr("d",m).append("title").text((function(t){return"".concat(t.data.country,": ").concat(t.data.country.toLocaleString())})),h.append("g").attr("font-family","sans-serif").attr("font-size",12).attr("text-anchor","middle").selectAll("text").data(p).join("text").attr("transform",(function(t){return"translate(".concat(f.centroid(t),")")})).call((function(t){return t.append("tspan").attr("y","-0.4em").attr("font-weight","bold").text((function(t){return t.data.country}))})).call((function(t){return t.filter((function(t){return t.endAngle-t.startAngle>.25})).append("tspan").attr("x",0).attr("y","0.7em").attr("fill-opacity",.7).text((function(t){return t.data.country.toLocaleString()}))}));var v={top:30,right:0,bottom:30,left:40},y=g.m().domain([0,g.h(n,(function(t){return t.cases}))]).nice().range([i-v.bottom,v.top]),_=g.l().domain(g.k(n.length)).range([v.left,c-v.right]).padding(.1),b=g.o(".charts__svg").attr("viewBox",[0,0,c,i]);b.append("g").selectAll("rect").data(n).join("rect").attr("fill",(function(t){return a._manageColors(t.cases)})).attr("x",(function(t,e){return _(e)})).attr("y",(function(t){return y(t.cases)})).attr("height",(function(t){return y(0)-y(t.cases)})).attr("width",_.bandwidth()).on("mouseover",(function(t){var e=t.country;a.props.setPickedData({countryName:e,cases:t.cases})})),b.append("g").call((function(t){return t.attr("transform","translate(0,".concat(i-v.bottom,")")).call(g.b(_).tickFormat((function(t){return n[t].country})).tickSizeOuter(0))})),b.append("g").call((function(t){return t.attr("transform","translate(".concat(v.left,",0)")).call(g.c(y).ticks(null,"s")).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",-v.left).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(n.y)}))})),this.setState(Object(l.a)({},this.state,{loading:!1}))}}},{key:"_manageColors",value:function(t){if(!t)return"#ff0909";for(var e=0,a=[{min:0,max:1e3,color:"#fff1d9"},{min:1001,max:1e4,color:"#fdcd8b"},{min:10001,max:5e4,color:"#b55440"},{min:50001,max:1e5,color:"#b53828"},{min:100001,max:420001,color:"#500000"}];e<a.length;e++){var n=a[e];if(t>n.min&&t<n.max)return n.color}return"#000"}},{key:"render",value:function(){return r.a.createElement("div",{className:"charts",ref:this.ref},this.state.loading&&r.a.createElement(p.a,{className:"charts__progress",color:"secondary"}),r.a.createElement("svg",{className:"charts__svg"}),r.a.createElement("svg",{className:"charts__svg1"}),r.a.createElement("div",{className:"charts__tooltip"}))}}]),a}(r.a.Component)),N=(a(196),function(t){return{backgroundColor:t}}),j=function(t){return r.a.createElement("div",{className:"legend"},r.a.createElement("h3",null,"Legend"),r.a.createElement("div",{className:"legend__element",style:N("#fff1d9")},"0-1000"),r.a.createElement("div",{className:"legend__element",style:N("#fdcd8b")},"1001-10000"),r.a.createElement("div",{className:"legend__element",style:N("#b55440")},"10001-50000"),r.a.createElement("div",{className:"legend__element",style:N("#b53828")},"50001-100000"),r.a.createElement("div",{className:"legend__element",style:Object(l.a)({},N("#500000"),{color:"white"})},"100001-320001"))},E=function(){var t=Object(n.useState)({}),e=Object(i.a)(t,2),a=e[0],o=e[1],c=Object(n.useState)([]),s=Object(i.a)(c,2),l=s[0],u=s[1];return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__info"},r.a.createElement(_,a)),r.a.createElement("div",{className:"app__charts"},r.a.createElement(b,{setPickedData:o,data:l})),r.a.createElement("div",{className:"app__content"},r.a.createElement(y,{setPickedData:o,setAllData:u})),r.a.createElement("div",{className:"app__legend"},r.a.createElement(j,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[165,1,2]]]);
//# sourceMappingURL=main.ed655cde.chunk.js.map